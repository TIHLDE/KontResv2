// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
    provider = "prisma-client-js"
}

datasource db {
    provider = "postgresql"
    url      = env("DATABASE_URL")
}

//Har ikke funnet en måte prisma kan importere fra types.ts, må manuellt passe på at disse stemmer overens
enum ReservationState {
    PENDING
    CONFIRMED 
    CANCELLED 
}

model Post {
    id        Int      @id @default(autoincrement())
    name      String
    createdAt DateTime @default(now())
    updatedAt DateTime @updatedAt

    @@index([name])
}

model BookableItem {
    item_id         Int       @id @default(autoincrement())
    name            String
    description     String
    allows_alcohol  Boolean
    group_id        String
    reservation     Reservation[]

    @@index([name])
}

model Reservation {
    resservation_id              Int @id @default(autoincrement())
    author          String
    bookable_item   BookableItem @relation(fields: [bookable_item_id], references: [item_id])
    bookable_item_id Int
    start_time      DateTime
    end_time        DateTime
    state           ReservationState @default(PENDING)
    description     String
    accepted_rules  Boolean
    group           String
    serves_alcohol  Boolean
    sober_watch     String
    approved_by     String
}
