// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
    provider = "prisma-client-js"
}

generator zod {
    provider = "zod-prisma"
    output = "../src/server/db/zod"
}

datasource db {
    provider = "postgresql"
    url      = env("DATABASE_URL")
}

//Har ikke funnet en måte prisma kan importere fra types.ts, må manuellt passe på at disse stemmer overens
enum ReservationState {
    PENDING
    APPROVED
    REJECTED
}

model Group {
    groupSlug     String        @id
    name          String
    BookableItems BookableItem[]
}

model BookableItem {
    itemSlug      String        @id
    name          String
    description   String
    allowsAlcohol Boolean
    groupSlug     String
    group         Group         @relation(fields: [groupSlug], references: [groupSlug])
    reservation   Reservation[]

    @@index([name])
}

model Reservation {
    reservationId    String           @id @default(uuid())
    authorId         String
    bookableItem     BookableItem     @relation(fields: [bookableItemSlug], references: [itemSlug])
    bookableItemSlug String
    startTime        DateTime
    endTime          DateTime
    status           ReservationState @default(PENDING)
    description      String
    acceptedRules    Boolean
    groupId          String
    servesAlcohol    Boolean
    soberWatch       String?
    approvedById     String?
}